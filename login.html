<!DOCTYPE html>
<html>
<head>
	<title>Facebook</title>
	<link rel="icon" type="imge/gif" href="facebook.jpg" sizes="16x16">
	<link rel="stylesheet" type="text/css" href="reset.css"/>
	<link rel="stylesheet" type="text/css" href="login.css"/>
	<link rel="stylesheet" type="text/html" href="entrar.html"/>
	
	<style type="text/css">
		#bt {
			width: 200px;
			height: 38px;
			margin-bottom: 10px;
			background-color: #69a74e;
			color: white;
			font-size: 19px;
			border-radius: 5px;
			border: 1px solid;
			border-color: #3b6e22 #3b5e22 #2c5115;
		}

		#bottom {
			background-color: #3b5998;
			color: white;
			border: 1px solid black;

		}

		#email {
			width: 405px;
			height: 38px;
			margin-bottom: 10px;
			font-size: 19px;
			border-radius: 5px;
			border-color: #bdc7d8;
			border: 1px solid #ccd0d5;
		}

		#cadastrarSenha {
			width: 405px;
			height: 38px;
			margin-bottom: 10px;
			font-size: 19px;
			border-radius: 5px;
			border-color: #bdc7d8;
			border: 1px solid #ccd0d5;
		}

		#nomeUsuario {
			width: 140px;
			height: 18px;
			margin-right: 15px;
			border-color: #1d2a5b;
			border: 1px solid black;
		}

		#senha {
			width: 140px;
			height: 18px;
			margin-right: 15px;
			border-color: #1d2a5b;
			border: 1px solid black;
		}

		#pAzul {
			margin-bottom: 5px;
		}
	</style>
</head>

<body>
		<h1 class="titulo-principal">Facebook</h1>

		<div class="primeiro-acesso">
			<div style="display: inline-block;">
				<p id="pAzul">Nome de Usuario:</p>
				<input id="nomeUsuario" name="nomeUsuario" placeholder="Digite seu usuario">
			</div>

			<div style="display: inline-block;">
				<p id="pAzul">Senha:</p>
				<input id="senha" name="senha" placeholder="Digite sua senha">
			</div>

				<button id="bottom" onclick="entrar()">Entrar</button>
		</div>

	<main>
		<div class="imagem">
			<img src="rede social.jpg" alt="Imagem de conexao" class="imagem">
		</div>

		<div class="segundo-acesso">
			<p class="texto1">Abra uma conta</p>
			<p class="texto2">É rápido e fácil</p>

			<div>
				<input type="email" name="email" id="email" placeholder="Nome ou e-mail">
			</div>

			<div>
				<input type="cadastrarSenha" name="cadastrarSenha" id="cadastrarSenha" placeholder="Cadastrar senha">
			</div>

			<button id="bt" onclick="cadastrarNovoUsuario()">Cadastrar</button>
			<button id="bt" onclick="mostrarUsuario()">Mostrar usuario</button>
		</div>
	</main>

	<script src="script.js"></script>
	<script>
		var usuarios = JSON.parse(localStorage.getItem("usuarios"))
		if (!usuarios){
			usuarios = [];
		}

		function cadastrarNovoUsuario(){
			// pegar o que a pessoa digitou no input email
			var nomeUsuario = document.getElementById("email").value
			// pegar o que a pessoa digitou no input cadastrarSenha
			var senha = document.getElementById("cadastrarSenha").value

			// verificar se o nomeUsuario digitado nao é vazio
			if (nomeUsuario === ""){
				// mostrar para o usuario que o nome de usuario é invalido
				alert("nome de usuario vazio")
				// parar de executar a minha funcao
				return;
			}

			// verificar se a senha digitado nao é vazio
			if (senha === ""){
				alert("senha vazia é invalida")
				return;
			}

			for (let i = 0; i<usuarios.length; i++){
				console.log(i, usuarios[i])
				if (usuarios[i].nomeUsuario === usuarios[i]){
					alert("nome de usuario ja existe")
				}
			}

			// criar novo objecto do novo usuario

			const novoUsuario = {id: pegaNovoId(), nomeUsuario: nomeUsuario, senha: senha};
            
            if(criarUsuario(novoUsuario)){
                document.getElementById("email").value = "";
                document.getElementById("cadastrarSenha").value = "";
                alert("Novo usuario criado");    
            }else{
                alert("ocorreu um erro na criação do usuario !");    
            }
		}

		function entrar(){
			// pegar o que a pessoa digitou no input nomeUsuario
			var nomeUsuario = document.getElementById("nomeUsuario").value
			// pegar o que a pessoa digitou no input senha
			var senha = document.getElementById("senha").value

			// verificar se o nomeUsuario digitado nao é vazio
			if (nomeUsuario === "") {
				// mostrar para o usuario que o nome de usuario esta vazio
				alert("nome de usuario vazio")
				//parar de executar a minha funcao
				return;
			}

			// verificar se senha digitado nao é vazio
			if (senha === ""){
				// mostrar para o meu usuario que a senha esta vazia
				alert("senha vazia é invalida")
				// parar de executar a minha funcao
				return;
			}

			const usuarioLogado = logar(nomeUsuario,senha);
            if(usuarioLogado){
                localStorage.setItem('usuarioLogado', JSON.stringify(usuarioLogado));
                window.location.href = "entrar.html"; 
            }else{
                document.getElementById("nomeUsuario").value = "";
                document.getElementById("senha").value = "";
                alert("Nome de usuario ou senha incorretas");
            }
		}

		function mostrarUsuario(){
			console.log(usuariosAtuais())
		}

	</script>
</body>
</html>