<!DOCTYPE html>
<html>
<head>
	<title>Facebook</title>
	<link rel="icon" type="imge/gif" href="facebook.jpg" sizes="16x16">
	<link rel="stylesheet" type="text/css" href="entrar.css">
</head>

<body>
	<div class="titulo-principal">
		<h1><center>Facebook</center></h1>
	</div>

	<div class="painel">
		<div class="esquerda">
			<div class="informacoes">
				<div>
				<button onclick="sair()">Sair</button>
				</div>

				<p>Amigos</p>
			</div>
		</div>

		<div class="centro">
			<div class="escrever">
				<div class="texto">
					<label>No que você está pensando hoje?</label>
				</div>
				<p contenteditable = "true" id="caixaTexto" class="caixaTexto"></p>
				<button onclick="postar()">Postar</button>
			</div>

			<div class="postagem">
				<div id="publicacoes">
					
				</div>
			</div>
		</div>

		<div class="direita">
			<div class="sugestaoAmigos">
				<h2><center>Segestão de Amigos</center></h2>
				<div id="usuarioAdicionado">
					
				</div>
			</div>
		</div>
	</div>

	<script src="script.js"></script>
	<script>
		function postar() {
			let posts = document.getElementById("caixaTexto").innerHTML
			console.log(posts)

			// verificar se caixaTexto nao é vazio
			if (posts === "") {
				// mostrar para o usuario que o nome de usuario esta vazio
				alert("Caixa de texto vazia")
				// parar de executar a funcao
				return;
			}

			let publicacoes = document.getElementById("publicacoes")

			// criar paragrafo que aparece nome do usuario
			let nomeUsuario = document.createElement("p");
			nomeUsuario.innerHTML = JSON.parse(localStorage.getItem("usuarioLogado")).nomeUsuario;			

			publicacoes.appendChild(nomeUsuario);
			publicacoes.innerHTML += `<div><p>${nomeUsuario}</p><div class="postagem">${posts}</div></div>`;
			console.log(publicacoes)
		}

		function carregarSugestaoAmigos() {
			let container = document.getElementById("usuarioAdicionado")
            let usuariosAmigos = usuariosAtuais();

            for(let i=0; i<usuariosAmigos.length; i++){

                console.log("opa")
                //cria paragrafo que aparece nome do usuario
                let nomeUsuario = document.createElement("p");
                nomeUsuario.innerHTML = usuariosAmigos[i].nomeUsuario;

                let botaoAdicionar = document.createElement("button");
                botaoAdicionar.innerHTML = "Adicionar Amigo"
                botaoAdicionar.setAttribute("onclick",`usuarioAdicionado(${usuariosAmigos[i].id})`)

                container.appendChild(nomeUsuario);
                container.appendChild(botaoAdicionar);
                
            }
		} 

		function usuarioAdicionar(idAmigo) {
			alert(`adicionando amigo com id ${idAmigo}`)
		}

		function sair() {
			window.location.href = "login.html"; 
		}

		carregarSugestaoAmigos();
	</script>
</body>
</html>